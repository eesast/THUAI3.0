# THUAI3.0赛题规则

THUAI3.0 原电子系第21届队式程序设计大赛

## 游戏基本情况

- 本游戏为参考*Overcooked*的多角色合作游戏，游戏的基本进行方式为做饭-提交-得分
- 一队含有2个角色，每场比赛由4只队伍共同参加
- 游戏为定时进行，即每局游戏的时长固定，一支队伍的游戏目的即需要在固定的时间中尽量获得更高的分数
- 在原本Overcooked的基础上，我们引入了一些增加游戏的对抗性的因素以增加游戏性

## 游戏元素

- 地图大小：50*50
- 在该地图中，包含有以下实体地图元素：游戏角色，墙体，菜品，道具，陷阱，飞行物
- 此外，参考Overcooked，游戏设计有任务系统

### 菜品

- 目前游戏中的菜品大致可分为三大类：食材、中间产物、成品
- 其中，食材的唯一来源是由“墙体”中的食物产生点产出，而中间产物和成品则需要玩家通过收集原材料在灶台进行加工得到
- 玩家获得分数的唯一方式是向“墙体”中的任务提交点提交自己完成的菜品
- 绝大多数合成路线是定死的，唯一的特例是成品中的“香锅”，具体将在之后“墙体”中的灶台中说明

### 任务系统

- 不是所有菜品都能够进行提交的，只有玩家根据随机产生的任务制作出对应的菜肴进行提交才能够得到分数
- 游戏的任务系统将以一个恒定的速率产生任务，每个任务将包含且仅包含一道菜品中的“成品”，食材和中间产物不可能出现在任务系统的任务中
- 任务是有时限的，一旦一个任务超过一段时间没有被完成，那么这个任务就会直接被取消。
- 由于不同的成品的合成难度具有相当大的不同（这里合成难度包括所需材料的数量和需要烹饪的次数，某些成品的烹饪需要先制作中间产物然后再制作成品），任务的时限和分数奖励都是不同的

### 道具与陷阱

- 道具是再设计时为增加游戏的趣味性和竞技性所设立的系统，以下将一次介绍目前游戏中已经完成的道具

#### buff类道具

- 虎头鞋（TigerShoes）：被动增加一定移动速度
- 速度增益（SpeedBuff）：使用该道具会在一定时间内提升较多的移动速度（比虎头鞋多），重复使用重置持续时间
- 力量增益（StrenthBuff）：使用该道具会在一定时间内提升投掷距离，重复使用重置持续时间。“投掷距离”将在玩家属性中介绍
- 望远镜（TeleScope）：被动提升视野范围。“视野范围”将在玩家属性中介绍
- 高级调料（Condiment）：和食物一起提交，当次提交获得的分数按比例提升，需注意该道具不是被动，如果在提交任务时使用该道具，则道具将被使用且获得分数加成，也可以选择不使用道具。此外，调料作为灶台制作成品“香锅”的依据，在墙体中具体说明
- 金坷垃（Fertilizer）：对食物产生点使用，提高该食物产生点的食材刷新速率，使其刷新速率加倍
- 护心镜（BreastPlate）：能够阻挡一次debuff(地雷和陷阱)，被动
- 传送门（SpaceGate）：有一次直接抵达一定范围内的任意地点的机会（目标需要是人能到的地方），玩家使用时需要提供两个参数（第一个参数为在X方向移动的距离，第二个参数为在Y方向上移动的距离，注意是相对位移，不是目标点的坐标）

#### debuff类道具（目前只有陷阱）

- 胶水（WaveGlue）：污染一定范围内的地板一定时间，走在上面的人减速，可见，范围以自身为中心的3*3格子
- 地雷（Mine）：埋下后走到上面的人会被炸，损失分数，不炸友军，触发即销毁，范围脚底一格，不可见
- 陷阱（Trap）：走到上面的人会掉下去，眩晕一段时间无法进行任何动作，触发即销毁，不炸友军，范围脚底一格，不可见

### 墙体

- 游戏中的墙体可以分为：墙，桌子，食物产生点，灶台，垃圾桶，任务提交点
- 理论上游戏中所有的墙体均无法与玩家重合，就是玩家不能走到墙上，如果有这种情况，当为游戏bug

#### 墙和桌子

- 没有特殊功能的墙体，他们两个的区别在于是否阻挡飞行物

#### 食物产生点
- 是整个游戏唯一的食材来源
- 在游戏开始时，食物产生点将自动生产一种随机食材。之后，如果没有玩家来拾取该食材，食物产生点将不会产生更多的食材，需要玩家拾取食材之后，食物产生点开始计时，一段时间之后再随机产生新的食材
- 初始时食材产生速率较慢，可以通过使用金坷垃来加快。

#### 垃圾桶

- 可以自动销毁一切物体的桶，如果玩家把菜品或道具扔到和垃圾桶同一格，菜品和道具会自动消失

#### 任务提交点

- 玩家提交任务的地方，玩家拿着菜品进行提交，如果任务系统中存在该菜品对应的任务，那么菜品就自动提交，玩家获得分数奖励；如果没有对应任务的话就什么也不会发生

#### 灶台

- 玩家制作中间产物和成品的地方。当玩家发出使用灶台的操作指令时，灶台会自动检测和自己处于同一格的菜品（这里解释以下同一格，比如一个物体中心的坐标为（10.3，18.5），那么这个物体就在（10，18）这一格，需要注意是物体中心，游戏中的所有物体均为1*1的正方形），并在“食谱”中搜索同一格的这些菜品是否能制作某种成品或中间产物，如果有对应的产物将直接开始制作；而如果没有搜索到对应的产物，仍然会开始制作，但产物将是毫无用处的“黑暗料理”
- 如果没搜索到有菜品在同一格，灶台不会开始工作
- 同一种菜品的数量没有用处，也就是2份也按1份算
- 无论最后的成品是什么，当灶台开始工作的瞬间，同一格的菜品就已经被放进了锅里（从地图上删除）了，不存在从锅里再把材料捞出来的操作；同时，在锅里面的中间产物/成品完成之前，它将保持为黑暗料理，知道烹饪时间到达时转变为对应的成品
- 灶台工作是全自动的，不需要玩家在旁边看护
- 保护机制：净土保卫战的主题是生存，不是要饿死别人，因此为了防止把其他队伍没烧完的菜肴直接端走扔掉等一系列操作出现，我们为灶台添加了保护机制，在灶台开始烹饪之后的一段时间中，只有启动灶台的人和他的队友有权端走（拾取）未完成的菜肴。保护时间略长于菜品的烹饪时间，目前定为烹饪时间的1.25倍（这个时间之后可能会下调以适当增加玩家对时间的把控，但始终会长于烹饪时间）
- 烧焦机制：菜品毕竟不能一直烧，会烧焦的，当一样菜品在工作台中待的时间超过了其本身烹饪时间的1.5倍之后，它就烧糊了，变得和黑暗料理一样毫无价值
- 特殊菜肴：香锅。在灶台进行检测时，会优先检测与自己同一格的物体中是否有道具高级调料（Condiment），如果有的话，无论同一格中有什么菜品，灶台都会默认制作成品“香锅”。香锅总共有八种可能的原料，制作香锅需要八种原料中的至少三种，至多五种（如果有厨师天赋可以八种原料全部加入，天赋在之后玩家属性中说明），原料越多的香锅分数越高
- 5~8种原料的香锅分值超过其他所有菜肴，任务系统在游戏进行一段时间之后才会开始有可能产生香锅任务

### 飞行物

- 玩家具有投掷物品的能力，可以把手中的道具或者菜品向面朝的方向扔出，当扔出的道具/菜品在空中运动时，即为飞行物
- 飞行物可以穿过游戏中的大部分物体，只有部分墙体能够阻挡飞行物
- 墙体中，桌子、垃圾桶、灶台不会阻挡飞行物，道具和菜品可以飞过去，也可以停在上面，其中，如果停在垃圾桶上就自动销毁了
- 墙、食物产生点和任务提交点会阻挡物体。“阻挡物体”指发生反弹，不会影响物体的总运动距离。

### 玩家

- 玩家将分为玩家属性和API两部分介绍

#### 玩家属性

- 玩家ID，队伍ID
- 位置：玩家在地图中的位置
- 移动速度：其数值表示玩家每秒移动的距离
- 移动方向：八个方向
- 视野：游戏角色的视野为以自身为中心的正方形，按整数格计算（比如人在（25，25）这一格，视野范围为9，则角色能看到以（16，16）格为左下角，（34，34）格为右上角的正方形的信息）
- 菜品：人物手上持有的菜品，需注意手上只能持有一样菜品，拾取新的菜品原来手上的就掉下来了
- 道具：人物手上持有的道具，同样只能持有一样
- 分数（团队属性）：提交菜品获得
- 天赋：玩家所拥有的天赋，每名玩家在游戏正式开始之前进行选择，天赋将较显著地提高玩家的某方面能力。目前的天赋有五种：跑步健将（Runner，移动速度加快），大力士（StrongMan，投掷极限距离增加），幸运儿（LuckyBoy，每隔一段时间自动获得道具），厨师（Cook，使用Condiment提交菜品时获得的分数加成比别人高，同时香锅能加入8种原料），技术人员（Technician，使用大部分的道具效果有加成）

#### API

- API共有四个，分别为Move，Pick，Put，Use

#### Move

- public void Move(Direction direction_t,int duration)
- 前一个参数表示走路的方向（八个方向），后一个表示走路的时间，按毫秒算
- 当遇到障碍物的时候会贴到墙上，如果撞到障碍物，那么位置不会发生改变（比如左边有一堵墙，这时向左上走的结果是不会移动而不是缓慢向上移动）

#### Put

- public void Put(int distance,int ThrowDish)
- 前一个参数表示扔出物品的距离，如果为0则停在脚下，同时投掷距离有上限，参数超过上限则按上限算
- 第二个参数表示扔出去的是什么，因为人手上拿着菜和工具两样东西，该参数为0则表示扔出道具，不为0则表示扔出菜
- 扔出去的东西有飞行速度10

#### Pick

- public void Pick()
- Pick没有参数，捡东西的时候优先搜索自己脚下站着的那个格子，如果没有能够拾取的东西，则会搜索自己面向的那一格
- 1 2 3
  4 5 6
  7 8 9
- 比如人站在格子5，如果面向右上，那么就会在搜索完脚下后搜索格子3，面向下就会搜索8
- 只会搜索两个格子，如果两格子中都没有能够拾取的东西，就会拾取失败

#### Use

- public void Use(int type,int parameter_1,int parameter_2)
- 使用灶台、道具和提交任务均用Use完成
- 前一个参数用来表示是否使用的是道具，如果该参数为0，说明不使用手中道具，而是用灶台做饭/提交任务
- type为0时，搜索人面向的格子（由于灶台和人物提交点都算作墙体，人不可能站在上面），如果那个格子是灶台就是做饭，是任务提交点就是提交任务
- type不为0即表示使用手中道具，parameter为使用道具传入的参数（目前只有传送门需要传递参数）
- 参数均默认为0
